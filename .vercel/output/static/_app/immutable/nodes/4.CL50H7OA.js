import{z as Je,a2 as ze,C as Ke,D as Ye,I as we,Q as fe,S as He,i as Be,s as $e,j as v,k as O,l as $,m as g,p as k,y as F,q as H,r as G,f as u,v as m,d as L,w as d,n as K,a3 as Ge,o as Ue,x as Y,a4 as se,B as ne,L as _e,H as pe,F as ye,G as ke,a5 as We,N as ie,O as ae,P as oe,b as J,J as qe,t as z,K as X,T as ce,R as Fe,U as Z,h as Ee,V as me,Y as be,a6 as Qe,a7 as Xe,a8 as Ze,a9 as et,aa as Ie,M as ve,e as re}from"../chunks/vendor.DPX5suGc.js";import{g as tt,f as rt,d as st,t as De}from"../chunks/twitter.D1mL71c9.js";import{c as lt,a as nt,b as it}from"../chunks/public.CdQsj55-.js";const je="twitter_rate_limit",xe=typeof window<"u"?localStorage.getItem(je):null,at=xe?JSON.parse(xe):{isLimited:!1,reset:0},Q=Je(at);typeof window<"u"&&Q.subscribe(s=>{localStorage.setItem(je,JSON.stringify(s))});const ot=new ze(lt),ct=ot.getGenerativeModel({model:"gemini-1.5-flash"});async function ut(s){try{const e=`
            Generate a thoughtful reply to this tweet. The reply should be:
            - Professional and engaging
            - Maximum 280 characters
            - Contextually relevant
            - Natural sounding
            
            Tweet: "${s}"
            
            Reply:
        `;return(await ct.generateContent(e)).response.text().slice(0,280)}catch(e){throw console.error("Error generating reply:",e),e}}const dt=new Ke().setEndpoint(nt).setProject(it),ee=new Ye(dt),te="674348930004107bec0b",he="6743489e000954d53e54",de="674348a3002a604521db";async function Ce(s){try{return(await ee.listDocuments(te,he,[fe.equal("tweet_id",s)])).documents.length>0}catch(e){return console.error("Error checking tweet:",e),!1}}const le={async saveTweet(s){try{return await Ce(s.tweet_id)?null:await ee.createDocument(te,he,we.unique(),s)}catch(e){throw console.error("Error saving tweet:",e),e}},async saveResponse(s){try{return await ee.createDocument(te,de,we.unique(),s)}catch(e){throw console.error("Error saving response:",e),e}},async getResponsesForTweet(s){try{return await ee.listDocuments(te,de,[fe.equal("tweet_id",s)])}catch(e){throw console.error("Error getting responses:",e),e}},async getUserTweets(s){try{return await ee.listDocuments(te,he,[fe.equal("author_id",s)])}catch(e){throw console.error("Error getting user tweets:",e),e}},async updateResponseStatus(s,e){try{return await ee.updateDocument(te,de,s,{posted:e})}catch(t){throw console.error("Error updating response status:",t),t}},checkTweetExists:Ce};function Te(s,e,t){const r=s.slice();return r[26]=e[t],r}function Le(s,e,t){const r=s.slice();return r[29]=e[t],r}function Se(s){let e,t,r,l,i,n,a=s[2].length>0&&Pe();return{c(){e=v("div"),t=v("p"),r=$("Rate limit exceeded. Please wait "),l=$(s[4]),i=$(" before trying again."),n=O(),a&&a.c(),this.h()},l(f){e=g(f,"DIV",{class:!0});var o=k(e);t=g(o,"P",{class:!0});var E=k(t);r=G(E,"Rate limit exceeded. Please wait "),l=G(E,s[4]),i=G(E," before trying again."),E.forEach(u),n=H(o),a&&a.l(o),o.forEach(u),this.h()},h(){m(t,"class","text-yellow-400"),m(e,"class","bg-yellow-500/5 border border-yellow-500/10 rounded-xl p-4 mb-6")},m(f,o){L(f,e,o),d(e,t),d(t,r),d(t,l),d(t,i),d(e,n),a&&a.m(e,null)},p(f,o){o[0]&16&&Y(l,f[4]),f[2].length>0?a||(a=Pe(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(f){f&&u(e),a&&a.d()}}}function Pe(s){let e,t="Showing cached data";return{c(){e=v("p"),e.textContent=t,this.h()},l(r){e=g(r,"P",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-bk1b1a"&&(e.textContent=t),this.h()},h(){m(e,"class","text-white/40 text-sm mt-2")},m(r,l){L(r,e,l)},d(r){r&&u(e)}}}function ft(s){let e,t=ne(s[2]),r=[];for(let l=0;l<t.length;l+=1)r[l]=Me(Te(s,t,l));return{c(){e=v("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=g(l,"DIV",{class:!0});var i=k(e);for(let n=0;n<r.length;n+=1)r[n].l(i);i.forEach(u),this.h()},h(){m(e,"class","space-y-6")},m(l,i){L(l,e,i);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,null)},p(l,i){if(i[0]&14796){t=ne(l[2]);let n;for(n=0;n<t.length;n+=1){const a=Te(l,t,n);r[n]?r[n].p(a,i):(r[n]=Me(a),r[n].c(),r[n].m(e,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=t.length}},d(l){l&&u(e),_e(r,l)}}}function ht(s){let e,t='<p class="text-white/60">No recent mentions found</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(r){e=g(r,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-4x3qyu"&&(e.innerHTML=t),this.h()},h(){m(e,"class","text-center py-12")},m(r,l){L(r,e,l)},p:K,d(r){r&&u(e)}}}function _t(s){let e,t,r;return{c(){e=v("div"),t=v("p"),r=$(s[1]),this.h()},l(l){e=g(l,"DIV",{class:!0});var i=k(e);t=g(i,"P",{});var n=k(t);r=G(n,s[1]),n.forEach(u),i.forEach(u),this.h()},h(){m(e,"class","bg-red-500/5 border border-red-500/10 rounded-xl p-4 text-center text-red-400")},m(l,i){L(l,e,i),d(e,t),d(t,r)},p(l,i){i[0]&2&&Y(r,l[1])},d(l){l&&u(e)}}}function pt(s){let e,t='<div class="w-10 h-10 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"></div> <p class="text-white/60">Loading mentions...</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(r){e=g(r,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1p1hlq0"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex flex-col items-center justify-center py-12")},m(r,l){L(r,e,l)},p:K,d(r){r&&u(e)}}}function mt(s){let e;return{c(){e=$("@unknown")},l(t){e=G(t,"@unknown")},m(t,r){L(t,e,r)},p:K,d(t){t&&u(e)}}}function bt(s){let e,t=s[3][s[26].author_id].username+"",r;return{c(){e=$("@"),r=$(t)},l(l){e=G(l,"@"),r=G(l,t)},m(l,i){L(l,e,i),L(l,r,i)},p(l,i){i[0]&12&&t!==(t=l[3][l[26].author_id].username+"")&&Y(r,t)},d(l){l&&(u(e),u(r))}}}function Re(s){let e,t,r="Generated Replies:",l,i=ne(s[7][s[26].id]),n=[];for(let a=0;a<i.length;a+=1)n[a]=Ve(Le(s,i,a));return{c(){e=v("div"),t=v("p"),t.textContent=r,l=O();for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=g(a,"DIV",{class:!0});var f=k(e);t=g(f,"P",{class:!0,"data-svelte-h":!0}),F(t)!=="svelte-lpk2o9"&&(t.textContent=r),l=H(f);for(let o=0;o<n.length;o+=1)n[o].l(f);f.forEach(u),this.h()},h(){m(t,"class","text-sm text-blue-400"),m(e,"class","space-y-4 bg-blue-500/5 border border-blue-500/10 rounded-lg p-4 mb-4")},m(a,f){L(a,e,f),d(e,t),d(e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(a,f){if(f[0]&8580){i=ne(a[7][a[26].id]);let o;for(o=0;o<i.length;o+=1){const E=Le(a,i,o);n[o]?n[o].p(E,f):(n[o]=Ve(E),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=i.length}},d(a){a&&u(e),_e(n,a)}}}function vt(s){let e;return{c(){e=$("Post Reply")},l(t){e=G(t,"Post Reply")},m(t,r){L(t,e,r)},d(t){t&&u(e)}}}function gt(s){let e,t,r;return{c(){e=ye("svg"),t=ye("path"),r=$(`
                        Posted`),this.h()},l(l){e=ke(l,"svg",{class:!0,fill:!0,viewBox:!0});var i=k(e);t=ke(i,"path",{d:!0}),k(t).forEach(u),i.forEach(u),r=G(l,`
                        Posted`),this.h()},h(){m(t,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),m(e,"class","w-3 h-3"),m(e,"fill","currentColor"),m(e,"viewBox","0 0 20 20")},m(l,i){L(l,e,i),d(e,t),L(l,r,i)},d(l){l&&(u(e),u(r))}}}function wt(s){let e,t;return{c(){e=v("div"),t=$(`
                        Posting...`),this.h()},l(r){e=g(r,"DIV",{class:!0}),k(e).forEach(u),t=G(r,`
                        Posting...`),this.h()},h(){m(e,"class","w-3 h-3 border-2 border-white/20 border-t-white rounded-full animate-spin")},m(r,l){L(r,e,l),L(r,t,l)},d(r){r&&(u(e),u(t))}}}function Ve(s){let e,t,r=s[29].content+"",l,i,n,a,f,o=new Date(s[29].generated_at).toLocaleString()+"",E,C,V,B,P,I,S;function M(p,y){return p[8][`${p[26].id}-${p[29].id}`]?wt:p[29].posted?gt:vt}let R=M(s),A=R(s);function U(){return s[15](s[26],s[29])}return{c(){e=v("div"),t=v("p"),l=$(r),i=O(),n=v("div"),a=v("p"),f=$("Generated: "),E=$(o),C=O(),V=v("button"),A.c(),P=O(),this.h()},l(p){e=g(p,"DIV",{class:!0});var y=k(e);t=g(y,"P",{class:!0});var b=k(t);l=G(b,r),b.forEach(u),i=H(y),n=g(y,"DIV",{class:!0});var h=k(n);a=g(h,"P",{class:!0});var w=k(a);f=G(w,"Generated: "),E=G(w,o),w.forEach(u),C=H(h),V=g(h,"BUTTON",{class:!0});var _=k(V);A.l(_),_.forEach(u),h.forEach(u),P=H(y),y.forEach(u),this.h()},h(){m(t,"class","text-white/80"),m(a,"class","text-xs text-white/40"),m(V,"class","bg-green-500 hover:bg-green-600 text-white px-4 py-1 rounded-full text-xs font-medium transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:hover:scale-100 flex items-center gap-2"),V.disabled=B=s[8][`${s[26].id}-${s[29].id}`]||s[29].posted,m(n,"class","flex justify-between items-center mt-2"),m(e,"class","border-t border-blue-500/10 pt-3 first:border-t-0 first:pt-0")},m(p,y){L(p,e,y),d(e,t),d(t,l),d(e,i),d(e,n),d(n,a),d(a,f),d(a,E),d(n,C),d(n,V),A.m(V,null),d(e,P),I||(S=pe(V,"click",U),I=!0)},p(p,y){s=p,y[0]&132&&r!==(r=s[29].content+"")&&Y(l,r),y[0]&132&&o!==(o=new Date(s[29].generated_at).toLocaleString()+"")&&Y(E,o),R!==(R=M(s))&&(A.d(1),A=R(s),A&&(A.c(),A.m(V,null))),y[0]&388&&B!==(B=s[8][`${s[26].id}-${s[29].id}`]||s[29].posted)&&(V.disabled=B)},d(p){p&&u(e),A.d(),I=!1,S()}}}function yt(s){let e;return{c(){e=$("Generate Reply")},l(t){e=G(t,"Generate Reply")},m(t,r){L(t,e,r)},d(t){t&&u(e)}}}function kt(s){let e,t=`<div class="w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"></div>
                  Generating...`;return{c(){e=v("span"),e.innerHTML=t,this.h()},l(r){e=g(r,"SPAN",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-10nlgm4"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex items-center gap-2")},m(r,l){L(r,e,l)},d(r){r&&u(e)}}}function Me(s){let e,t,r,l,i,n=s[11](s[26].created_at)+"",a,f,o,E=s[26].text+"",C,V,B,P,I,S,M,R,A;function U(N,c){return N[26].author_id&&N[3][N[26].author_id]?bt:mt}let p=U(s),y=p(s),b=s[7][s[26].id]&&Re(s);function h(N,c){return N[6][N[26].id]?kt:yt}let w=h(s),_=w(s);function T(){return s[16](s[26])}return{c(){e=v("div"),t=v("div"),r=v("span"),y.c(),l=O(),i=v("span"),a=$(n),f=O(),o=v("p"),C=$(E),V=O(),b&&b.c(),B=O(),P=v("div"),I=v("button"),_.c(),M=O(),this.h()},l(N){e=g(N,"DIV",{class:!0});var c=k(e);t=g(c,"DIV",{class:!0});var D=k(t);r=g(D,"SPAN",{class:!0});var x=k(r);y.l(x),x.forEach(u),l=H(D),i=g(D,"SPAN",{class:!0});var q=k(i);a=G(q,n),q.forEach(u),D.forEach(u),f=H(c),o=g(c,"P",{class:!0});var j=k(o);C=G(j,E),j.forEach(u),V=H(c),b&&b.l(c),B=H(c),P=g(c,"DIV",{class:!0});var W=k(P);I=g(W,"BUTTON",{class:!0});var ge=k(I);_.l(ge),ge.forEach(u),W.forEach(u),M=H(c),c.forEach(u),this.h()},h(){m(r,"class","text-blue-400 font-medium"),m(i,"class","text-white/40 text-sm"),m(t,"class","flex justify-between items-center mb-4"),m(o,"class","text-white/80 mb-6"),m(I,"class","bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-full text-sm font-medium transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50 disabled:hover:scale-100"),I.disabled=S=s[6][s[26].id],m(P,"class","flex justify-end"),m(e,"class","bg-[#0C1322] border border-blue-500/10 rounded-xl p-6 hover:border-blue-500/20 transition-all duration-300")},m(N,c){L(N,e,c),d(e,t),d(t,r),y.m(r,null),d(t,l),d(t,i),d(i,a),d(e,f),d(e,o),d(o,C),d(e,V),b&&b.m(e,null),d(e,B),d(e,P),d(P,I),_.m(I,null),d(e,M),R||(A=pe(I,"click",T),R=!0)},p(N,c){s=N,p===(p=U(s))&&y?y.p(s,c):(y.d(1),y=p(s),y&&(y.c(),y.m(r,null))),c[0]&4&&n!==(n=s[11](s[26].created_at)+"")&&Y(a,n),c[0]&4&&E!==(E=s[26].text+"")&&Y(C,E),s[7][s[26].id]?b?b.p(s,c):(b=Re(s),b.c(),b.m(e,B)):b&&(b.d(1),b=null),w!==(w=h(s))&&(_.d(1),_=w(s),_&&(_.c(),_.m(I,null))),c[0]&68&&S!==(S=s[6][s[26].id])&&(I.disabled=S)},d(N){N&&u(e),y.d(),b&&b.d(),_.d(),R=!1,A()}}}function Ne(s){let e,t='<p class="text-blue-400">Using demo data - Rate limit will reset soon</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(r){e=g(r,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-13a6pag"&&(e.innerHTML=t),this.h()},h(){m(e,"class","mt-6 bg-blue-500/5 border border-blue-500/10 rounded-xl p-4 text-center")},m(r,l){L(r,e,l)},d(r){r&&u(e)}}}function Et(s){let e,t,r="Recent Mentions",l,i,n,a,f=s[10].remaining+"",o,E,C=s[10].limit+"",V,B,P,I,S=s[10].resetDate+"",M,R,A,U,p=s[9].isLimited&&Se(s);function y(_,T){return _[0]?pt:_[1]?_t:_[2].length===0?ht:ft}let b=y(s),h=b(s),w=s[5]&&Ne();return{c(){e=v("div"),t=v("h3"),t.textContent=r,l=O(),i=v("div"),n=v("p"),a=$("API Calls Remaining: "),o=$(f),E=$("/"),V=$(C),B=O(),P=v("p"),I=$("Reset at: "),M=$(S),R=O(),p&&p.c(),A=O(),h.c(),U=O(),w&&w.c(),this.h()},l(_){e=g(_,"DIV",{class:!0});var T=k(e);t=g(T,"H3",{class:!0,"data-svelte-h":!0}),F(t)!=="svelte-1isn8jx"&&(t.textContent=r),l=H(T),i=g(T,"DIV",{class:!0});var N=k(i);n=g(N,"P",{class:!0});var c=k(n);a=G(c,"API Calls Remaining: "),o=G(c,f),E=G(c,"/"),V=G(c,C),c.forEach(u),B=H(N),P=g(N,"P",{class:!0});var D=k(P);I=G(D,"Reset at: "),M=G(D,S),D.forEach(u),N.forEach(u),R=H(T),p&&p.l(T),A=H(T),h.l(T),U=H(T),w&&w.l(T),T.forEach(u),this.h()},h(){m(t,"class","text-2xl font-bold text-white mb-8"),m(n,"class","text-white/60"),m(P,"class","text-white/60"),m(i,"class","bg-blue-500/5 border border-blue-500/10 rounded-xl p-4 mb-6"),m(e,"class","mentions-list p-6 svelte-1xgwgaz")},m(_,T){L(_,e,T),d(e,t),d(e,l),d(e,i),d(i,n),d(n,a),d(n,o),d(n,E),d(n,V),d(i,B),d(i,P),d(P,I),d(P,M),d(e,R),p&&p.m(e,null),d(e,A),h.m(e,null),d(e,U),w&&w.m(e,null)},p(_,T){_[9].isLimited?p?p.p(_,T):(p=Se(_),p.c(),p.m(e,A)):p&&(p.d(1),p=null),b===(b=y(_))&&h?h.p(_,T):(h.d(1),h=b(_),h&&(h.c(),h.m(e,U))),_[5]?w||(w=Ne(),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i:K,o:K,d(_){_&&u(e),p&&p.d(),h.d(),w&&w.d()}}}const Ae="twitter_mentions_cache",ue="twitter_rate_limit";function It(s,e,t){let r;Ge(s,Q,c=>t(9,r=c));let{accessToken:l}=e,i=!0,n="",a=[],f={},o="";const E=30*60*1e3;let C={remaining:0,limit:0,reset:0,resetDate:""};const V=()=>{const c=localStorage.getItem(ue);if(c){const{reset:D,isLimited:x}=JSON.parse(c);if(D>Date.now()/1e3)return se(Q,r.isLimited=x,r),se(Q,r.reset=D,r),!0;localStorage.removeItem(ue)}return!1},B=c=>{localStorage.setItem(ue,JSON.stringify({reset:c,isLimited:!0}))},P=()=>{const c=localStorage.getItem(Ae);if(c){const{data:D,timestamp:x}=JSON.parse(c);if(Date.now()-x<E)return t(2,a=D.mentions),t(3,f=D.users),!0}return!1},I=c=>{localStorage.setItem(Ae,JSON.stringify({data:c,timestamp:Date.now()}))},S=()=>{const c=r.reset*1e3,D=Date.now(),x=c-D;if(x>0){const q=Math.floor(x/6e4),j=Math.floor(x%6e4/1e3);t(4,o=`${q}m ${j}s`),setTimeout(S,1e3)}else t(4,o=""),se(Q,r.isLimited=!1,r),localStorage.removeItem(ue)};let M=null,R=!1;const A=async()=>M||(M=(async()=>{var c,D;try{const x=await fetch("/api/twitter/mentions",{headers:{Authorization:`Bearer ${l}`}});if(t(5,R=x.headers.get("X-Using-Mock-Data")==="true"),R&&console.log("📝 Using mock data for mentions"),x.status===429){const j=parseInt(x.headers.get("x-rate-limit-reset")||"0");se(Q,r.isLimited=!0,r),se(Q,r.reset=j,r),B(j),S();return}if(!x.ok)throw new Error("Failed to fetch mentions");const q=await x.json();t(2,a=q.data||[]),t(3,f=((D=(c=q.includes)==null?void 0:c.users)==null?void 0:D.reduce((j,W)=>(W.id&&(j[W.id]=W),j),{}))||{}),I({mentions:a,users:f})}catch(x){t(1,n=x instanceof Error?x.message:"Failed to load mentions"),console.error("Error loading mentions:",x)}finally{t(0,i=!1),M=null}})(),M),U=()=>{const c=localStorage.getItem("twitter_rate_limit");if(c){const{isLimited:D,reset:x,lastChecked:q}=JSON.parse(c);if(D&&Date.now()<x*1e3)return!1}return!0};Ue(async()=>{if(!U()){t(0,i=!1),P();return}if(V()){S(),t(0,i=!1),P();return}if(P()&&t(0,i=!1),r.isLimited||await A(),a.length>0)for(const D of a){const x=await le.getResponsesForTweet(D.id);x.documents.length>0&&t(7,b[D.id]=x.documents.map(q=>({id:q.$id,content:q.content,generated_at:q.generated_at,model:q.model})),b)}});const p=c=>c?new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";let y={},b={},h={};async function w(c){try{t(6,y[c.id]=!0,y),await le.checkTweetExists(c.id)||await le.saveTweet({tweet_id:c.id,author_id:c.author_id||"",author_username:c.author_id&&f[c.author_id]?f[c.author_id].username:"unknown",content:c.text,created_at:c.created_at||new Date().toISOString()});const x=await ut(c.text),q=new Date().toISOString(),W={id:(await le.saveResponse({tweet_id:c.id,content:x,generated_at:q,model:"gemini-1.5-flash",posted:!1})).$id,content:x,generated_at:q,model:"gemini-1.5-flash"};b[c.id]||t(7,b[c.id]=[],b),t(7,b[c.id]=[W,...b[c.id]],b)}catch(D){console.error("Failed to generate reply:",D)}finally{t(6,y[c.id]=!1,y)}}async function _(c,D){try{if(t(8,h[`${c.id}-${D.id}`]=!0,h),!(await fetch("/api/twitter/reply",{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({in_reply_to_tweet_id:c.id,text:D.content})})).ok)throw new Error("Failed to post reply");await le.updateResponseStatus(D.id,!0),t(7,b[c.id]=b[c.id].map(q=>q.id===D.id?{...q,posted:!0}:q),b)}catch(x){throw console.error("Failed to post reply:",x),x}finally{t(8,h[`${c.id}-${D.id}`]=!1,h)}}const T=(c,D)=>_(c,D),N=c=>w(c);return s.$$set=c=>{"accessToken"in c&&t(14,l=c.accessToken)},[i,n,a,f,o,R,y,b,h,r,C,p,w,_,l,T,N]}class Dt extends He{constructor(e){super(),Be(this,e,It,Et,$e,{accessToken:14},null,[-1,-1])}}function xt(s,e,t){const r=s.slice();return r[5]=e[t],r[7]=t,r}function Ct(s){let e,t,r,l;const i=[Pt,St],n=[];function a(f,o){return f[3]?0:1}return t=a(s),r=n[t]=i[t](s),{c(){e=v("main"),r.c(),this.h()},l(f){e=g(f,"MAIN",{class:!0});var o=k(e);r.l(o),o.forEach(u),this.h()},h(){m(e,"class","container mx-auto px-4 py-8")},m(f,o){L(f,e,o),n[t].m(e,null),l=!0},p(f,o){let E=t;t=a(f),t===E?n[t].p(f,o):(Fe(),J(n[E],1,1,()=>{n[E]=null}),qe(),r=n[t],r?r.p(f,o):(r=n[t]=i[t](f),r.c()),z(r,1),r.m(e,null))},i(f){l||(z(r),l=!0)},o(f){J(r),l=!1},d(f){f&&u(e),n[t].d()}}}function Tt(s){let e,t,r,l,i,n,a="Back to Login",f;return{c(){e=v("div"),t=v("div"),r=v("p"),l=$(s[1]),i=O(),n=v("a"),n.textContent=a,this.h()},l(o){e=g(o,"DIV",{class:!0});var E=k(e);t=g(E,"DIV",{class:!0});var C=k(t);r=g(C,"P",{class:!0});var V=k(r);l=G(V,s[1]),V.forEach(u),i=H(C),n=g(C,"A",{href:!0,class:!0,"data-svelte-h":!0}),F(n)!=="svelte-17vmd44"&&(n.textContent=a),C.forEach(u),E.forEach(u),this.h()},h(){m(r,"class","text-red-400 mb-4"),m(n,"href","/login"),m(n,"class","inline-flex items-center gap-2 px-6 py-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-all duration-300 hover:scale-105"),m(t,"class","bg-red-500/10 border border-red-500/20 rounded-xl p-6 text-center"),m(e,"class","container mx-auto px-4 py-8")},m(o,E){L(o,e,E),d(e,t),d(t,r),d(r,l),d(t,i),d(t,n)},p(o,E){E&2&&Y(l,o[1])},i(o){o&&(f||X(()=>{f=Z(e,me,{y:20,duration:500}),f.start()}))},o:K,d(o){o&&u(e)}}}function Lt(s){let e,t='<div class="w-10 h-10 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"></div> <p class="text-white/60">Loading dashboard...</p>',r;return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=g(l,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1czienh"&&(e.innerHTML=t),this.h()},h(){m(e,"class","flex flex-col items-center justify-center min-h-[80vh]")},m(l,i){L(l,e,i)},p:K,i(l){l&&(r||X(()=>{r=Z(e,be,{duration:300}),r.start()}))},o:K,d(l){l&&u(e)}}}function St(s){let e,t="No user data available",r;return{c(){e=v("p"),e.textContent=t,this.h()},l(l){e=g(l,"P",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1xiv5qc"&&(e.textContent=t),this.h()},h(){m(e,"class","text-white/60 text-center")},m(l,i){L(l,e,i)},p:K,i(l){l&&(r||X(()=>{r=Z(e,be,{}),r.start()}))},o:K,d(l){l&&u(e)}}}function Pt(s){let e,t,r,l,i,n=s[3].name+"",a,f,o,E,C=s[3].username+"",V,B,P,I,S,M,R,A,U,p=s[3].profile_image_url&&Oe(s),y=ne([{icon:Xe,label:"Generate Reply",color:"blue",active:!0},{icon:Ze,label:"View History",color:"purple",active:!1},{icon:et,label:"Settings",color:"emerald",active:!1}]),b=[];for(let h=0;h<3;h+=1)b[h]=At(xt(s,y,h));return R=new Dt({props:{accessToken:s[2]}}),{c(){e=v("div"),t=v("div"),p&&p.c(),r=O(),l=v("div"),i=v("h2"),a=$(n),f=O(),o=v("p"),E=$("@"),V=$(C),P=O(),I=v("div");for(let h=0;h<3;h+=1)b[h].c();S=O(),M=v("div"),ie(R.$$.fragment),this.h()},l(h){e=g(h,"DIV",{class:!0});var w=k(e);t=g(w,"DIV",{class:!0});var _=k(t);p&&p.l(_),r=H(_),l=g(_,"DIV",{});var T=k(l);i=g(T,"H2",{class:!0});var N=k(i);a=G(N,n),N.forEach(u),f=H(T),o=g(T,"P",{class:!0});var c=k(o);E=G(c,"@"),V=G(c,C),c.forEach(u),T.forEach(u),_.forEach(u),w.forEach(u),P=H(h),I=g(h,"DIV",{class:!0});var D=k(I);for(let q=0;q<3;q+=1)b[q].l(D);D.forEach(u),S=H(h),M=g(h,"DIV",{});var x=k(M);ae(R.$$.fragment,x),x.forEach(u),this.h()},h(){m(i,"class","text-2xl font-bold text-white mb-1"),m(o,"class","text-white/60"),m(t,"class","flex items-center gap-6"),m(e,"class","bg-[#0C1322]/50 backdrop-blur-xl border border-blue-500/10 rounded-xl p-8 mb-8 hover:border-blue-500/20 transition-all duration-300 hover:scale-[1.01]"),m(I,"class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-8")},m(h,w){L(h,e,w),d(e,t),p&&p.m(t,null),d(t,r),d(t,l),d(l,i),d(i,a),d(l,f),d(l,o),d(o,E),d(o,V),L(h,P,w),L(h,I,w);for(let _=0;_<3;_+=1)b[_]&&b[_].m(I,null);L(h,S,w),L(h,M,w),oe(R,M,null),U=!0},p(h,w){h[3].profile_image_url?p?p.p(h,w):(p=Oe(h),p.c(),p.m(t,r)):p&&(p.d(1),p=null),(!U||w&8)&&n!==(n=h[3].name+"")&&Y(a,n),(!U||w&8)&&C!==(C=h[3].username+"")&&Y(V,C);const _={};w&4&&(_.accessToken=h[2]),R.$set(_)},i(h){if(!U){h&&(B||X(()=>{B=Z(e,me,{y:20,duration:500}),B.start()}));for(let w=0;w<3;w+=1)z(b[w]);z(R.$$.fragment,h),h&&(A||X(()=>{A=Z(M,be,{duration:500,delay:500}),A.start()})),U=!0}},o(h){b=b.filter(Boolean);for(let w=0;w<3;w+=1)J(b[w]);J(R.$$.fragment,h),U=!1},d(h){h&&(u(e),u(P),u(I),u(S),u(M)),p&&p.d(),_e(b,h),ce(R)}}}function Oe(s){let e,t,r;return{c(){e=v("img"),this.h()},l(l){e=g(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ie(e.src,t=s[3].profile_image_url)||m(e,"src",t),m(e,"alt",r=s[3].name),m(e,"class","w-20 h-20 rounded-full border-2 border-blue-500/20")},m(l,i){L(l,e,i)},p(l,i){i&8&&!Ie(e.src,t=l[3].profile_image_url)&&m(e,"src",t),i&8&&r!==(r=l[3].name)&&m(e,"alt",r)},d(l){l&&u(e)}}}function Rt(s){let e,t,r;var l=s[5].icon;function i(n,a){return{props:{class:"w-5 h-5 text-emerald-400"}}}return l&&(e=ve(l,i())),{c(){e&&ie(e.$$.fragment),t=re()},l(n){e&&ae(e.$$.fragment,n),t=re()},m(n,a){e&&oe(e,n,a),L(n,t,a),r=!0},i(n){r||(e&&z(e.$$.fragment,n),r=!0)},o(n){e&&J(e.$$.fragment,n),r=!1},d(n){n&&u(t),e&&ce(e,n)}}}function Vt(s){let e,t,r;var l=s[5].icon;function i(n,a){return{props:{class:"w-5 h-5 text-purple-400"}}}return l&&(e=ve(l,i())),{c(){e&&ie(e.$$.fragment),t=re()},l(n){e&&ae(e.$$.fragment,n),t=re()},m(n,a){e&&oe(e,n,a),L(n,t,a),r=!0},i(n){r||(e&&z(e.$$.fragment,n),r=!0)},o(n){e&&J(e.$$.fragment,n),r=!1},d(n){n&&u(t),e&&ce(e,n)}}}function Mt(s){let e,t,r;var l=s[5].icon;function i(n,a){return{props:{class:"w-5 h-5 text-blue-400"}}}return l&&(e=ve(l,i())),{c(){e&&ie(e.$$.fragment),t=re()},l(n){e&&ae(e.$$.fragment,n),t=re()},m(n,a){e&&oe(e,n,a),L(n,t,a),r=!0},i(n){r||(e&&z(e.$$.fragment,n),r=!0)},o(n){e&&J(e.$$.fragment,n),r=!1},d(n){n&&u(t),e&&ce(e,n)}}}function Nt(s){let e;return{c(){e=v("span"),this.h()},l(t){e=g(t,"SPAN",{class:!0}),k(e).forEach(u),this.h()},h(){m(e,"class","absolute -top-1 -right-1 w-2 h-2 bg-"+s[5].color+"-400 rounded-full animate-pulse")},m(t,r){L(t,e,r)},d(t){t&&u(e)}}}function At(s){let e,t,r,l,i,n,a,f,o,E,C,V=s[5].label+"",B,P,I,S,M;const R=[Mt,Vt,Rt],A=[];function U(y,b){return y[5].color==="blue"?0:y[5].color==="purple"?1:2}f=U(s),o=A[f]=R[f](s);let p=s[5].active&&Nt(s);return{c(){e=v("button"),t=v("div"),r=O(),l=v("div"),i=O(),n=v("div"),a=v("div"),o.c(),E=O(),C=v("span"),B=$(V),P=O(),p&&p.c(),I=O(),this.h()},l(y){e=g(y,"BUTTON",{class:!0});var b=k(e);t=g(b,"DIV",{class:!0}),k(t).forEach(u),r=H(b),l=g(b,"DIV",{class:!0}),k(l).forEach(u),i=H(b),n=g(b,"DIV",{class:!0});var h=k(n);a=g(h,"DIV",{class:!0});var w=k(a);o.l(w),w.forEach(u),E=H(h),C=g(h,"SPAN",{class:!0});var _=k(C);B=G(_,V),_.forEach(u),P=H(h),p&&p.l(h),h.forEach(u),I=H(b),b.forEach(u),this.h()},h(){m(t,"class","absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl bg-gradient-to-r from-"+s[5].color+"-500/10 via-transparent to-transparent animate-gradient"),m(l,"class","absolute -inset-px opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl bg-"+s[5].color+"-500/20 blur-lg"),m(a,"class","group-hover:animate-bounce-subtle"),m(C,"class","text-white group-hover:text-"+s[5].color+"-400 transition-colors"),m(n,"class","relative flex items-center gap-3"),m(e,"class","group relative bg-[#0C1322]/50 backdrop-blur-xl border border-"+s[5].color+"-500/10 rounded-xl p-6 hover:border-"+s[5].color+"-500/20 transition-all duration-300 hover:scale-[1.02] hover:-translate-y-1")},m(y,b){L(y,e,b),d(e,t),d(e,r),d(e,l),d(e,i),d(e,n),d(n,a),A[f].m(a,null),d(n,E),d(n,C),d(C,B),d(n,P),p&&p.m(n,null),d(e,I),M=!0},p:K,i(y){M||(z(o),y&&(S||X(()=>{S=Z(e,me,{y:20,duration:500,delay:200+s[7]*100}),S.start()})),M=!0)},o(y){J(o),M=!1},d(y){y&&u(e),A[f].d(),p&&p.d()}}}function Ot(s){let e,t,r,l,i,n="XGenAI Dashboard",a,f,o,E,C,V="Logout",B,P,I,S,M,R,A='<div class="absolute inset-0 bg-[radial-gradient(circle_at_center,#1e3a8a0a,transparent_70%)] animate-pulse-slow"></div> <div class="absolute top-0 left-0 w-1/2 h-1/2 bg-blue-500/5 blur-[100px] animate-float"></div> <div class="absolute bottom-0 right-0 w-1/2 h-1/2 bg-purple-500/5 blur-[100px] animate-float delay-1000"></div>',U,p,y;o=new We({props:{class:"w-4 h-4"}});const b=[Lt,Tt,Ct],h=[];function w(_,T){return _[0]?0:_[1]?1:2}return I=w(s),S=h[I]=b[I](s),{c(){e=v("div"),t=v("header"),r=v("div"),l=v("div"),i=v("h1"),i.textContent=n,a=O(),f=v("button"),ie(o.$$.fragment),E=O(),C=v("span"),C.textContent=V,P=O(),S.c(),M=O(),R=v("div"),R.innerHTML=A,this.h()},l(_){e=g(_,"DIV",{class:!0});var T=k(e);t=g(T,"HEADER",{class:!0});var N=k(t);r=g(N,"DIV",{class:!0});var c=k(r);l=g(c,"DIV",{class:!0});var D=k(l);i=g(D,"H1",{class:!0,"data-svelte-h":!0}),F(i)!=="svelte-1ddv9q9"&&(i.textContent=n),a=H(D),f=g(D,"BUTTON",{class:!0});var x=k(f);ae(o.$$.fragment,x),E=H(x),C=g(x,"SPAN",{"data-svelte-h":!0}),F(C)!=="svelte-1rheak"&&(C.textContent=V),x.forEach(u),D.forEach(u),c.forEach(u),N.forEach(u),P=H(T),S.l(T),M=H(T),R=g(T,"DIV",{class:!0,"data-svelte-h":!0}),F(R)!=="svelte-5luu3t"&&(R.innerHTML=A),T.forEach(u),this.h()},h(){m(i,"class","text-xl font-bold text-white"),m(f,"class","flex items-center gap-2 px-4 py-2 rounded-full bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-all duration-300 hover:scale-105"),m(l,"class","flex items-center justify-between h-full"),m(r,"class","container mx-auto px-4 h-16"),m(t,"class","sticky top-0 z-50 bg-[#0C1322]/80 backdrop-blur-xl border-b border-blue-500/10"),m(R,"class","fixed inset-0 -z-10"),m(e,"class","min-h-screen bg-[#0B1121]")},m(_,T){L(_,e,T),d(e,t),d(t,r),d(r,l),d(l,i),d(l,a),d(l,f),oe(o,f,null),d(f,E),d(f,C),d(e,P),h[I].m(e,null),d(e,M),d(e,R),U=!0,p||(y=pe(f,"click",s[4]),p=!0)},p(_,[T]){let N=I;I=w(_),I===N?h[I].p(_,T):(Fe(),J(h[N],1,1,()=>{h[N]=null}),qe(),S=h[I],S?S.p(_,T):(S=h[I]=b[I](_),S.c()),z(S,1),S.m(e,M))},i(_){U||(z(o.$$.fragment,_),_&&(B||X(()=>{B=Z(t,Qe,{duration:300}),B.start()})),z(S),U=!0)},o(_){J(o.$$.fragment,_),J(S),U=!1},d(_){_&&u(e),ce(o),h[I].d(),p=!1,y()}}}function Ht(s,e,t){let r;Ge(s,De,f=>t(3,r=f));let l=!0,i="",n="";return Ue(async()=>{try{if(!await tt()){await Ee("/login");return}if(r!=null&&r.username){const o=await rt(r.username);o&&t(2,n=o.accessToken)}t(0,l=!1)}catch(f){t(1,i="Failed to load dashboard"),console.error("Dashboard error:",f),t(0,l=!1)}}),[l,i,n,r,async()=>{try{t(0,l=!0),await st(),De.set(null),await Ee("/login")}catch(f){t(1,i="Failed to logout"),console.error("Logout error:",f),t(0,l=!1)}}]}class Ut extends He{constructor(e){super(),Be(this,e,Ht,Ot,$e,{})}}export{Ut as component};
